<html>
<head>
<link rel="stylesheet" href="styles.css" type="text/css">
<script language="javascript" src="jquery.min.js"></script>
<script language="javascript" src="api_test.js"></script>


<script>
var testInfo = {
    "job_init":{
        "string_fields":[]
        ,"numeric_fields":[]
        ,"required_fields":[]
        ,"url":"/job/init"
        ,"query":{}
    },
    "job_addnew":{
        "string_fields":["jobtype"]
        ,"object_fields":["parameters"]
        ,"required_fields":["jobtype", "parameters"]
        ,"url":"/job/addnew"
        ,"querylist":[
            {
                "label":"Successful blastp example",
                "query":{
                    "jobtype":"blastp",
                    "parameters":{
                        "seq":"MSIQENISSLQLRSWVSKSQRDLAKSILIGAPGGPAGYLRRASVAQLTQELGTAFFQQQQLPAAMADTFLEHLCLLDIDSEPVAARSTSIIATIGPASRSVERLKEMIKAGMNIARLNFSQHAIAREAEAAVYHRQLFEELRRAAPLSRDPTEVTAIGAVEAAFKCCAAAIIVLTTTGRS",
                        "targetdb":"canonicalsequences_all",
                        "num_alignments":3,
                        "evalue":1e-3
                    }
                }
            },
            {
                "label":"Failing blastp example",
                "query":{
                    "jobtype":"blastp",
                    "parameters":{
                        "seq":"000000111100000",
                        "targetdb":"canonicalsequences_all",
                        "num_alignments":3,
                        "evalue":1e-3
                    }
                }
            },
            {
                "label":"Successful substructure search + None (align = substructure) glycoct format",
                "query":{
                    "jobtype":"structure_search",
                    "parameters":{
                        "seq": "RES\n1b:x-dglc-HEX-1:5\n2b:x-dgal-HEX-1:5\n3b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n4s:n-glycolyl\n5b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n6s:n-glycolyl\nLIN\n1:1o(-1+1)2d\n2:2o(-1+2)3d\n3:3d(5+1)4n\n4:3o(-1+2)5d\n5:5d(5+1)6n",
                        "align":"substructure"
                    }
                }
            },
            {
                "label":"Successful substructure search + None (align = substructure) wurcs format",
                "query":{
                    "jobtype":"structure_search",
                    "parameters":{
                        "seq": "WURCS=2.0/3,4,3/[a2122h-1x_1-5][a2112h-1x_1-5][Aad21122h-2x_2-6_5*NCCO/3=O]/1-2-3-3/a?-b1_b?-c2_c?-d2",
                        "align":"substructure"
                    }
                }
            },
            {
                "label":"Successful structure search (align = wholeglycan) glycoct format",
                "query":{ 
                    "jobtype":"structure_search",
                    "parameters":{
                        "seq": "RES\n1b:x-dglc-HEX-1:5\n2b:x-dgal-HEX-1:5\n3b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n4s:n-glycolyl\n5b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n6s:n-glycolyl\nLIN\n1:1o(-1+1)2d\n2:2o(-1+2)3d\n3:3d(5+1)4n\n4:3o(-1+2)5d\n5:5d(5+1)6n",
                        "align":"wholeglycan"
                    }
                }
            },
            {
                "label":"Failing structure search (align = wholeglycan) glycoct format",
                "query":{ 
                    "jobtype":"structure_search",
                    "parameters":{
                            "align": "wholeglycan", 
                            "seq": "RES\n1b:b-dglc-HEX-1:5\n2s:n-acetyl\n3b:b-dgal-HEX-1:5\nLIN\n1:1d(2+1)2n\nd2:1o(3+1)3d"
                    }
                }
            },
            {
                "label":"Successful substructure search + reducing end (align = core) glycoct format",
                "query":{ 
                    "jobtype":"structure_search",
                    "parameters":{
                        "seq": "RES\n1b:x-dglc-HEX-1:5\n2b:x-dgal-HEX-1:5\n3b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n4s:n-glycolyl\n5b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n6s:n-glycolyl\nLIN\n1:1o(-1+1)2d\n2:2o(-1+2)3d\n3:3d(5+1)4n\n4:3o(-1+2)5d\n5:5d(5+1)6n",
                        "align":"core"
                    }
                }
            },
	    {
                "label":"Successful substructure search + terminal (align = nonreducingend) glycoct format",
                "query":{ 
                    "jobtype":"structure_search",
                    "parameters":{
                        "seq": "RES\n1b:x-dglc-HEX-1:5\n2b:x-dgal-HEX-1:5\n3b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n4s:n-glycolyl\n5b:x-dgro-dgal-NON-2:6|1:a|2:keto|3:d\n6s:n-glycolyl\nLIN\n1:1o(-1+1)2d\n2:2o(-1+2)3d\n3:3d(5+1)4n\n4:3o(-1+2)5d\n5:5d(5+1)6n",
                        "align":"nonreducingend"
                    }
                }
            }
        ]
    }
    ,"job_results":{
        "string_fields":["jobid"]
        ,"numeric_fields":[]
        ,"required_fields":["jobid"]
        ,"url":"/job/results"
        ,"query":{"jobid":1}
    }
    ,"glycan_list": {
        "string_fields": [
            "sort", 
            "id", 
            "order"
        ], 
        "url": "/glycan/list/", 
        "required_fields": [
            "id"
        ], 
        "numeric_fields": [
            "offset", 
            "limit"
        ] 
        ,"querylist":[
            {
                "label":"Simple listing",
                "query":{
                    "id":""
                }
            }
            ,{
                "label":"Listing with filters",
                "query":{
                    "id":"",
                    "filters":[
                        {   
                            "id":"by_mass",
                            "selected":["2k_3k", "3k_4k"],
                            "operator":"OR"
                        }
                    ]
                }
            }
        ]
    }
    ,"job_queue":{
        "string_fields":[]
        ,"numeric_fields":[]
        ,"required_fields":[]
        ,"url":"/job/queue"
        ,"query":{}
    }
    ,"job_status":{
        "string_fields":[]
        ,"numeric_fields":["jobid"]
        ,"required_fields":["jobid"]
        ,"url":"/job/status"
        ,"query":{"jobid": 1}
    }
    ,"job_detail":{
        "string_fields":[]
        ,"numeric_fields":["jobid"]
        ,"required_fields":["jobid"]
        ,"url":"/job/detail"
        ,"query":{"jobid": 1}
    }
    ,"job_list":{
        "string_fields":["visibility"]
        ,"numeric_fields":[]
        ,"required_fields":["visibility"]
        ,"url":"/job/list"
        ,"query":{"visibility":"all"}
    }
};

/////////////////////////////
$(document ).ready(function() {

    var cnList = [];
    var apiList = Object.keys(testInfo);
    cnList.push(getAutomatedCn(testInfo, apiList));

    var cn = '<table align=center width=1000 border=1 style="background:#eee;">';
    for (var i in cnList){
        cn += cnList[i];
    }
    cn += '</table>';
    $("body").html(cn);

});


</script>

</head>
<body>

</body>
<html>
